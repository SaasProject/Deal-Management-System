<div>
    <button class="btn btn-primary" ui-sref="dealForm">New Deal</button>
</div>

<div class="form-inline pull-right">
    <!-- <label>Filter by: &nbsp;</label>
    <select class="form-control" ng-model="filter" ng-selected="console()">
        <option ng-repeat="option in filterOptions">{{option}}</option>
    </select> -->
    <label>Search: &nbsp;</label>
    <input type="text" class="form-control" ng-model="searchText">
</div>
<table class="table">
    <thead>
        <th ng-repeat="essentialField in fields.essential" ng-if="essentialField.showInList">
            {{essentialField.name}}
        </th>
        <th ng-repeat="profileField in fields.profile" ng-if="profileField.showInList">
            {{profileField.name}}
        </th>
        <th ng-repeat="processField in fields.process" ng-if="processField.showInList">
            {{processField.name}}
        </th>
        <th ng-repeat="distributionField in fields.distribution" ng-if="distributionField.showInList">
            {{distributionField.name}}
        </th>
        <th ng-repeat="statusField in fields.status" ng-if="statusField.showInList">
            {{statusField.name}}
        </th>
        <th></th>
    </thead>
    <tbody>
        <tr ng-repeat="deal in deals | filter: searchText">
            <td ng-repeat="essentialField in fields.essential" ng-if="essentialField.showInList">
                {{(essentialField.type !== 'date') ? deal.essential[essentialField.name] : deal.essential[essentialField.name] | date: DATE_FORMAT}}
            </td>
            <td ng-repeat="profileField in fields.profile" ng-if="profileField.showInList">
                {{(profileField.type !== 'date') ? deal.profile[profileField.name] : deal.profile[profileField.name] | date: DATE_FORMAT}}
            </td>
            <td ng-repeat="processField in fields.process" ng-if="processField.showInList">
                {{(processField.type !== 'date') ? deal.process[processField.name] : deal.process[processField.name] | date: DATE_FORMAT}}
            </td>
            <td ng-repeat="distributionField in fields.distribution" ng-if="distributionField.showInList">
                {{(distributionField.type !== 'date') ? deal.distribution[distributionField.name] : deal.distribution[distributionField.name] | date: DATE_FORMAT}}
            </td>
            <td ng-repeat="statusField in fields.status" ng-if="statusField.showInList">
                {{(statusField.type !== 'date') ? deal.status[statusField.name] : deal.status[essentialField.name] | date: DATE_FORMAT}}
            </td>
            <td>
                <div class="pull-right">
                    <a style="cursor:pointer">
                        <i class="fa fa-list-alt" aria-hidden="true" ui-sref="dealForm({ID: deal.ID})" data-toggle="tooltip" title="View"></i>
                    </a>
                </div>
            </td>
        </tr>
    </tbody>
</table>